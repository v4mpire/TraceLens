(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{7481:function(e,t,s){Promise.resolve().then(s.bind(s,347))},347:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7573),r=s(7653),n=s(7015),i=s(6738),c=s(4331),l=s(1697);let d=[{id:"trace-1",name:"User Login Flow",duration:340,timestamp:Date.now()-12e4,status:"completed",nodes:[{id:"1",name:"Login Request",type:"service",duration:45},{id:"2",name:"Auth Service",type:"service",duration:120,critical:!0},{id:"3",name:"User DB",type:"database",duration:180,critical:!0},{id:"4",name:"Session Store",type:"database",duration:25}],links:[{source:"1",target:"2",duration:120},{source:"2",target:"3",duration:180},{source:"2",target:"4",duration:25}]},{id:"trace-2",name:"Product Search",duration:156,timestamp:Date.now()-6e4,status:"completed",nodes:[{id:"1",name:"Search Request",type:"service",duration:12},{id:"2",name:"Search Service",type:"service",duration:89},{id:"3",name:"Elasticsearch",type:"database",duration:67},{id:"4",name:"Cache",type:"database",duration:8}],links:[{source:"1",target:"2",duration:89},{source:"2",target:"3",duration:67},{source:"2",target:"4",duration:8}]}];function o(){let[e,t]=(0,r.useState)(!0),[s,o]=(0,r.useState)(d[0]);return((0,r.useEffect)(()=>{let e=setTimeout(()=>t(!1),800);return()=>clearTimeout(e)},[]),e)?(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(c.Z,{size:"lg"})})}):(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Traces"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Analyze execution traces and dependency flows"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(i.Z,{title:"Recent Traces",children:(0,a.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg cursor-pointer transition-colors ".concat((null==s?void 0:s.id)===e.id?"bg-blue-50 border-blue-200 border":"bg-gray-50 hover:bg-gray-100"),onClick:()=>o(e),children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.duration,"ms • ",new Date(e.timestamp).toLocaleTimeString()]}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat("completed"===e.status?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:e.status})]})]},e.id))})})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(i.Z,{title:s?"Trace: ".concat(s.name):"Select a trace",children:s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Duration:"}),(0,a.jsxs)("div",{className:"font-medium",children:[s.duration,"ms"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Timestamp:"}),(0,a.jsx)("div",{className:"font-medium",children:new Date(s.timestamp).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"font-medium capitalize",children:s.status})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-4",children:"Execution Flow"}),(0,a.jsx)(l.Z,{nodes:s.nodes,links:s.links,width:600,height:300})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Critical Path Analysis"}),(0,a.jsx)("div",{className:"space-y-2",children:s.nodes.filter(e=>e.critical).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-red-600",children:[e.duration,"ms"]})]},e.id))})]})]})})})]})]})})}},1697:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7573),r=s(7653),n=s(4874);function i(e){let{nodes:t,links:s,width:i=800,height:c=600}=e,l=(0,r.useRef)(null),[d,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!l.current||!t.length)return;let e=n.Ys(l.current);e.selectAll("*").remove();let a=n.A4v(t).force("link",n.Fsl(s).id(e=>e.id).distance(100)).force("charge",n.q5i().strength(-300)).force("center",n.wqt(i/2,c/2)),r=e.append("g").selectAll("line").data(s).enter().append("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>Math.sqrt(e.duration/10)),d=e.append("g").selectAll("circle").data(t).enter().append("circle").attr("r",e=>e.critical?12:8).attr("fill",e=>{switch(e.type){case"service":return e.critical?"#ef4444":"#3b82f6";case"database":return"#10b981";case"external":return"#f59e0b";case"function":return"#8b5cf6";default:return"#6b7280"}}).style("cursor","pointer").on("click",(e,t)=>o(t)).call(n.ohM().on("start",(e,t)=>{e.active||a.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||a.alphaTarget(0),t.fx=null,t.fy=null})),u=e.append("g").selectAll("text").data(t).enter().append("text").text(e=>e.name).attr("font-size",12).attr("dx",15).attr("dy",4);return a.on("tick",()=>{r.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),d.attr("cx",e=>e.x).attr("cy",e=>e.y),u.attr("x",e=>e.x).attr("y",e=>e.y)}),()=>{a.stop()}},[t,s,i,c]),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("svg",{ref:l,width:i,height:c,className:"border border-gray-200 rounded-lg"}),d&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 bg-white p-4 rounded-lg shadow-lg border",children:[(0,a.jsx)("h4",{className:"font-semibold",children:d.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Type: ",d.type]}),d.duration&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Duration: ",d.duration,"ms"]}),d.critical&&(0,a.jsx)("span",{className:"inline-block mt-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"Critical Path"})]})]})}},7015:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7573),r=s(8146),n=s(1695);let i=[{name:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Traces",href:"/traces",icon:"\uD83D\uDD0D"},{name:"Security",href:"/security",icon:"\uD83D\uDEE1️"}];function c(){let e=(0,n.usePathname)();return(0,a.jsxs)("div",{className:"w-64 bg-gray-900 text-white h-full",children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"TraceLens"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Runtime Truth Engine"})]}),(0,a.jsx)("nav",{className:"mt-8",children:i.map(t=>{let s=null==e?void 0:e.startsWith(t.href);return(0,a.jsxs)(r.default,{href:t.href,className:"flex items-center px-6 py-3 text-sm font-medium transition-colors ".concat(s?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[(0,a.jsx)("span",{className:"mr-3",children:t.icon}),t.name]},t.name)})})]})}function l(e){let{children:t}=e;return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(c,{}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:(0,a.jsx)("div",{className:"p-8",children:t})})]})}},6738:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7573);function r(e){let{title:t,children:s,className:r=""}=e;return(0,a.jsxs)("div",{className:"card ".concat(r),children:[t&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t}),s]})}},4331:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7573);function r(e){let{size:t="md",className:s=""}=e;return(0,a.jsx)("div",{className:"animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]," ").concat(s)})}}},function(e){e.O(0,[340,834,293,528,744],function(){return e(e.s=7481)}),_N_E=e.O()}]);