(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{7481:function(e,t,s){Promise.resolve().then(s.bind(s,347))},347:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7573),r=s(7653),n=s(3536),i=s(6738),c=s(4331),l=s(1697);let d=[{id:"trace-1",name:"User Login Flow",duration:340,timestamp:Date.now()-12e4,status:"completed",nodes:[{id:"1",name:"Login Request",type:"service",duration:45},{id:"2",name:"Auth Service",type:"service",duration:120,critical:!0},{id:"3",name:"User DB",type:"database",duration:180,critical:!0},{id:"4",name:"Session Store",type:"database",duration:25}],links:[{source:"1",target:"2",duration:120},{source:"2",target:"3",duration:180},{source:"2",target:"4",duration:25}]},{id:"trace-2",name:"Product Search",duration:156,timestamp:Date.now()-6e4,status:"completed",nodes:[{id:"1",name:"Search Request",type:"service",duration:12},{id:"2",name:"Search Service",type:"service",duration:89},{id:"3",name:"Elasticsearch",type:"database",duration:67},{id:"4",name:"Cache",type:"database",duration:8}],links:[{source:"1",target:"2",duration:89},{source:"2",target:"3",duration:67},{source:"2",target:"4",duration:8}]}];function o(){let[e,t]=(0,r.useState)(!0),[s,o]=(0,r.useState)(d[0]);return((0,r.useEffect)(()=>{let e=setTimeout(()=>t(!1),800);return()=>clearTimeout(e)},[]),e)?(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(c.Z,{size:"lg"})})}):(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Traces"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Analyze execution traces and dependency flows"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(i.Z,{title:"Recent Traces",children:(0,a.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg cursor-pointer transition-colors ".concat((null==s?void 0:s.id)===e.id?"bg-blue-50 border-blue-200 border":"bg-gray-50 hover:bg-gray-100"),onClick:()=>o(e),children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.duration,"ms â€¢ ",new Date(e.timestamp).toLocaleTimeString()]}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat("completed"===e.status?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:e.status})]})]},e.id))})})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(i.Z,{title:s?"Trace: ".concat(s.name):"Select a trace",children:s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Duration:"}),(0,a.jsxs)("div",{className:"font-medium",children:[s.duration,"ms"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Timestamp:"}),(0,a.jsx)("div",{className:"font-medium",children:new Date(s.timestamp).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Status:"}),(0,a.jsx)("div",{className:"font-medium capitalize",children:s.status})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-4",children:"Execution Flow"}),(0,a.jsx)(l.Z,{nodes:s.nodes,links:s.links,width:600,height:300})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Critical Path Analysis"}),(0,a.jsx)("div",{className:"space-y-2",children:s.nodes.filter(e=>e.critical).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-red-600",children:[e.duration,"ms"]})]},e.id))})]})]})})})]})]})})}},1697:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7573),r=s(7653),n=s(4874);function i(e){let{nodes:t,links:s,width:i=800,height:c=600}=e,l=(0,r.useRef)(null),[d,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!l.current||!t.length)return;let e=n.Ys(l.current);e.selectAll("*").remove();let a=n.A4v(t).force("link",n.Fsl(s).id(e=>e.id).distance(100)).force("charge",n.q5i().strength(-300)).force("center",n.wqt(i/2,c/2)),r=e.append("g").selectAll("line").data(s).enter().append("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>Math.sqrt(e.duration/10)),d=e.append("g").selectAll("circle").data(t).enter().append("circle").attr("r",e=>e.critical?12:8).attr("fill",e=>{switch(e.type){case"service":return e.critical?"#ef4444":"#3b82f6";case"database":return"#10b981";case"external":return"#f59e0b";case"function":return"#8b5cf6";default:return"#6b7280"}}).style("cursor","pointer").on("click",(e,t)=>o(t)).call(n.ohM().on("start",(e,t)=>{e.active||a.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||a.alphaTarget(0),t.fx=null,t.fy=null})),m=e.append("g").selectAll("text").data(t).enter().append("text").text(e=>e.name).attr("font-size",12).attr("dx",15).attr("dy",4);return a.on("tick",()=>{r.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),d.attr("cx",e=>e.x).attr("cy",e=>e.y),m.attr("x",e=>e.x).attr("y",e=>e.y)}),()=>{a.stop()}},[t,s,i,c]),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("svg",{ref:l,width:i,height:c,className:"border border-gray-200 rounded-lg"}),d&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 bg-white p-4 rounded-lg shadow-lg border",children:[(0,a.jsx)("h4",{className:"font-semibold",children:d.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Type: ",d.type]}),d.duration&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Duration: ",d.duration,"ms"]}),d.critical&&(0,a.jsx)("span",{className:"inline-block mt-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"Critical Path"})]})]})}},3536:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var a=s(7573),r=s(8146),n=s(1695),i=s(5453),c=s(9790),l=s(3025),d=s(6548),o=s(269),m=s(6438),u=s(7653),x=s(950),h=s(8846),f=s(5643);function g(){let{theme:e,setTheme:t}=(0,f.F)();return(0,a.jsxs)("button",{onClick:()=>t("light"===e?"dark":"light"),className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 w-9",children:[(0,a.jsx)(x.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(h.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}let p=[{name:"Dashboard",href:"/dashboard",icon:i.Z},{name:"Traces",href:"/traces",icon:c.Z},{name:"Performance",href:"/performance",icon:l.Z},{name:"Security",href:"/security",icon:d.Z}];function j(){let e=(0,n.usePathname)(),[t,s]=(0,u.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,a.jsx)("button",{onClick:()=>s(!t),className:"inline-flex items-center justify-center p-2 rounded-md text-foreground hover:bg-accent focus:outline-none focus:ring-2 focus:ring-ring",children:t?(0,a.jsx)(o.Z,{className:"h-6 w-6"}):(0,a.jsx)(m.Z,{className:"h-6 w-6"})})}),(0,a.jsx)("div",{className:"\n        fixed inset-y-0 left-0 z-40 w-64 bg-card border-r transform transition-transform duration-200 ease-in-out\n        ".concat(t?"translate-x-0":"-translate-x-full","\n        lg:translate-x-0 lg:static lg:inset-0\n      "),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b",children:[(0,a.jsxs)(r.default,{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"h-5 w-5 text-primary-foreground"})}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:"TraceLens"})]}),(0,a.jsx)(g,{})]}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:p.map(t=>{let n=e===t.href;return(0,a.jsxs)(r.default,{href:t.href,className:"sidebar-nav-item ".concat(n?"active":""),onClick:()=>s(!1),children:[(0,a.jsx)(t.icon,{className:"h-5 w-5 mr-3"}),t.name]},t.name)})}),(0,a.jsx)("div",{className:"p-4 border-t",children:(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)("p",{children:"Runtime Truth Engine"}),(0,a.jsx)("p",{className:"mt-1",children:"v1.0.0"})]})})]})}),t&&(0,a.jsx)("div",{className:"fixed inset-0 z-30 bg-background/80 backdrop-blur-sm lg:hidden",onClick:()=>s(!1)})]})}function v(e){let{children:t}=e;return(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(j,{}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:(0,a.jsx)("div",{className:"p-6 lg:p-8",children:t})})]})}},5643:function(e,t,s){"use strict";s.d(t,{F:function(){return c},ThemeProvider:function(){return i}});var a=s(7573),r=s(7653);let n=(0,r.createContext)({theme:"system",setTheme:()=>null});function i(e){let{children:t,defaultTheme:s="system",storageKey:i="tracelens-ui-theme",...c}=e,[l,d]=(0,r.useState)(s);return(0,r.useEffect)(()=>{let e=localStorage.getItem(i);e&&d(e)},[i]),(0,r.useEffect)(()=>{let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===l){let t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(t);return}e.classList.add(l)},[l]),(0,a.jsx)(n.Provider,{...c,value:{theme:l,setTheme:e=>{localStorage.setItem(i,e),d(e)}},children:t})}let c=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},6738:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7573);function r(e){let{title:t,children:s,className:r="",description:n}=e;return(0,a.jsxs)("div",{className:"card ".concat(r),children:[(t||n)&&(0,a.jsxs)("div",{className:"mb-4",children:[t&&(0,a.jsx)("h3",{className:"text-lg font-semibold",children:t}),n&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:n})]}),s]})}},4331:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(7573),r=s(5721);function n(e){let{size:t="md",className:s=""}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center ".concat(s),children:(0,a.jsx)(r.Z,{className:"animate-spin text-muted-foreground ".concat({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t])})})}}},function(e){e.O(0,[340,483,293,528,744],function(){return e(e.s=7481)}),_N_E=e.O()}]);